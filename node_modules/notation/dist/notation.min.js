!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("notation",[],t):"object"==typeof exports?exports.notation=t():e.notation=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="dist/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i);e.exports=a["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),u=r(o),l=n(3),s=r(l),c=n(4),f=r(c),v={SOURCE:"Invalid source object.",DEST:"Invalid destination object.",NOTATION:"Invalid notation: ",NOTA_OBJ:"Invalid notations object: "},h=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(i(this,e),!u["default"].isObject(t))throw new f["default"](v.SOURCE);this._source=t}return a(e,[{key:"each",value:function(t){var n=this,r=this._source,i=Object.keys(r);u["default"].each(i,function(i,a,o){var l=r[i],s=void 0;u["default"].isObject(l)?(s=new e(l),s.each(function(e,n,a,o){var u=i+"."+e;t.call(s,u,n,a,r)})):t.call(n,i,i,l,r)})}},{key:"eachKey",value:function(e){return this.each(e)}},{key:"eachValue",value:function(t,n){if(!e.isValid(t))throw new f["default"](v.NOTATION+"`"+t+"`");var r=this._source;e.eachNote(t,function(e,t,i,a){return r=u["default"].hasOwn(r,t)?r[t]:void 0,n(r,e,t,i,a)===!1?!1:void 0})}},{key:"getNotations",value:function(){var e=[];return this.each(function(t,n,r,i){e.push(t)}),e}},{key:"flatten",value:function(){var e={};return this.each(function(t,n,r,i){e[t]=r}),this._source=e,this}},{key:"expand",value:function(){return this._source=e.create({}).merge(this._source).value,this}},{key:"aggregate",value:function(){return this.expand()}},{key:"inspect",value:function(t){if(!e.isValid(t))throw new f["default"](v.NOTATION+"`"+t+"`");var n=this._source,r={has:!1,value:void 0};return e.eachNote(t,function(e,t,i,a){return u["default"].hasOwn(n,t)?(n=n[t],void(r={has:!0,value:n})):(r={has:!1,value:void 0},!1)}),r}},{key:"inspectRemove",value:function(t){if(!e.isValid(t))throw new f["default"](v.NOTATION+"`"+t+"`");var n=void 0,r=void 0;if(t.indexOf(".")<0)r=t,n=this._source;else{var i=e.parent(t);r=e.last(t),n=this.inspect(i).value}var a=void 0;return u["default"].hasOwn(n,r)?(a={has:!0,value:n[r]},delete n[r]):a={has:!1,value:void 0},a}},{key:"has",value:function(e){return this.inspect(e).has}},{key:"hasDefined",value:function(e){return void 0!==this.inspect(e).value}},{key:"get",value:function(e,t){var n=this.inspect(e);return n.has?n.value:t}},{key:"set",value:function(t,n){var r=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];if(!e.isValid(t))throw new f["default"](v.NOTATION+"`"+t+"`");var i=this._source,a=void 0;return e.eachNote(t,function(e,t,o,l){a=o===l.length-1,u["default"].hasOwn(i,t)?a?r&&(i[t]=n):i=i[t]:i=i[t]=a?n:{}}),this}},{key:"merge",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(!u["default"].isObject(e))throw new f["default"](v.NOTA_OBJ+"`"+e+"`");var r=void 0;return u["default"].each(Object.keys(e),function(i,a,o){r=e[i],t.set(i,r,n)}),this}},{key:"separate",value:function(t){var n=this;if(!u["default"].isArray(t))throw new f["default"](v.NOTA_OBJ+"`"+t+"`");var r=new e({});return u["default"].each(t,function(e,t,i){var a=n.inspectRemove(e);r.set(e,a.value)}),this._source=r._source,this}},{key:"filter",value:function(t){var n=this,r=this.value,i=u["default"].deepCopy(r);if(u["default"].stringOrArrayOf(t,"*"))return this._source=i,this;if(0===arguments.length||u["default"].stringOrArrayOf(t,""))return this._source={},this;var a=u["default"].isArray(t)?s["default"].sort(t.concat()):[t],o=void 0;"*"===a[0]?(o=new e(i),a.shift()):o=new e({});var l=void 0,c=void 0,f=void 0;return u["default"].each(a,function(e,t,i){return l=new s["default"](e),c=".*"===l.normalized.slice(-2),f=c?l.normalized.slice(0,-2):l.normalized,f.indexOf("*")<0?(l.isNegated?(o.remove(f),c&&o.set(f,{},!0)):o.copyFrom(r,f,null,!0),!0):void n.each(function(e,t,n,r){l.test(e)&&(l.isNegated?o.remove(e):o.set(e,n,!0))})}),this._source=o.value,this}},{key:"remove",value:function(e){return this.inspectRemove(e),this}},{key:"clone",value:function(){var t=u["default"].deepCopy(this.value);return new e(t)}},{key:"copyTo",value:function(t,n){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],i=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];if(!u["default"].isObject(t))throw new f["default"](v.DEST);var a=this.inspect(n);return a.has&&new e(t).set(r||n,a.value,i),this}},{key:"copyFrom",value:function(t,n){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],i=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];if(!u["default"].isObject(t))throw new f["default"](v.DEST);var a=new e(t).inspect(n);return a.has&&this.set(r||n,a.value,i),this}},{key:"moveTo",value:function(t,n){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],i=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];if(!u["default"].isObject(t))throw new f["default"](v.DEST);var a=this.inspectRemove(n);return a.has&&new e(t).set(r||n,a.value,i),this}},{key:"moveFrom",value:function(t,n){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],i=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];if(!u["default"].isObject(t))throw new f["default"](v.DEST);var a=new e(t).inspectRemove(n);return a.has&&this.set(r||n,a.value,i),this}},{key:"rename",value:function(e,t,n){return t?this.moveTo(this._source,e,t,n):this}},{key:"renote",value:function(e,t,n){return this.rename(e,t,n)}},{key:"extract",value:function(e,t){var n={};return this.copyTo(n,e,t),n}},{key:"copyToNew",value:function(e,t){return this.extract(e,t)}},{key:"extrude",value:function(e,t){var n={};return this.moveTo(n,e,t),n}},{key:"moveToNew",value:function(e,t){return this.extrude(e,t)}},{key:"value",get:function(){return this._source}}],[{key:"create",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return new e(t)}},{key:"isValid",value:function(e){return"string"==typeof e&&/^[^\s\.!]+(\.[^\s\.!]+)*$/.test(e)}},{key:"first",value:function(t){if(!e.isValid(t))throw new f["default"](v.NOTATION+"`"+t+"`");return t.split(".")[0]}},{key:"last",value:function(t){if(!e.isValid(t))throw new f["default"](v.NOTATION+"`"+t+"`");return t.split(".").reverse()[0]}},{key:"parent",value:function(t){if(!e.isValid(t))throw new f["default"](v.NOTATION+"`"+t+"`");return t.indexOf(".")>=0?t.replace(/\.[^\.]*$/,""):null}},{key:"eachNote",value:function(t,n){if(!e.isValid(t))throw new f["default"](v.NOTATION+"`"+t+"`");var r=t.split("."),i=[],a=void 0;u["default"].each(r,function(e,t,o){return i.push(e),a=i.join("."),n(a,e,t,r)===!1?!1:void 0},e)}}]),e}();h.Error=f["default"],h.Glob=s["default"],t["default"]=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.prototype.toString,r={isObject:function(e){return"[object Object]"===n.call(e)},isArray:function(e){return"[object Array]"===n.call(e)},hasOwn:function(e,t){return e&&"function"==typeof e.hasOwnProperty&&e.hasOwnProperty(t)},deepCopy:function(e){if(!r.isObject(e))return e;var t,n,i={};for(t in e)r.hasOwn(e,t)&&(n=e[t],i[t]=r.isObject(n)?r.deepCopy(n):n);return i},each:function(e,t,n){for(var r=e.length,i=-1;++i<r&&t.call(n,e[i],i,e)!==!1;);},eachRight:function(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);},pregQuote:function(e,t){return String(e).replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(t||"")+"-]","g"),"\\$&")},stringOrArrayOf:function(e,t){return"string"==typeof e&&e===t||r.isArray(e)&&1===e.length&&e[0]===t}};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),u=r(o),l=n(4),s=r(l),c=function(){function e(t){if(i(this,e),!e.isValid(t))throw new s["default"]('Invalid notation glob: "'+t+'"');this.glob=t;var n=e.normalize(t);this.normalized=n.glob,this.isNegated=n.isNegated,this.regexp=e.toRegExp(this.normalized),this.levels=this.normalized.split(".")}return a(e,[{key:"test",value:function(e){return"*"===this.normalized||""!==this.normalized&&""!==e&&this.regexp.test(e)}}],[{key:"create",value:function(t){return new e(t)}},{key:"toRegExp",value:function(e,t){return e=u["default"].pregQuote(e).replace(/\\\*/g,"[^\\s\\.]*").replace(/\\\?/g,"."),new RegExp("^"+e,t||"")}},{key:"normalize",value:function(t){t=t.replace(/\*+/g,"*"),t=e.isValid(t)?t:"";var n="!"===t.slice(0,1);return t=n?t.slice(1):t,{glob:t,isNegated:n}}},{key:"isValid",value:function(e){return"string"==typeof e&&/^!?[^\s\.!]+(\.[^\s\.!]+)*$/.test(e)}},{key:"compare",value:function(e,t){if(e===t)return 0;var n=e.split("."),r=t.split(".");if(n.length===r.length){var i=/(?:^|\.)\*(?:$|\.)/g,a=e.match(i),o=t.match(i),u=a?a.length:0,l=o?o.length:0;if(u===l){var s=0===e.indexOf("!"),c=0===t.indexOf("!");if(s===c)return t>e?-1:1;var f=s?e.slice(1):e,v=c?t.slice(1):t;return f===v?s?1:-1:v>f?-1:1}return u>l?-1:1}return n.length<r.length?-1:1}},{key:"sort",value:function(t){return t.sort(e.compare)}},{key:"union",value:function(t,n,r){var i=void 0,a=void 0,o=void 0;u["default"].eachRight(t,function(r,l){if(o=n.indexOf(r),o>=0&&n.splice(o,1),0===r.indexOf("!")){if(i=r.slice(1),n.indexOf(i)>=0)return t.splice(l,1),!0;u["default"].eachRight(n,function(n,r){n.indexOf("!")<0&&(a=e.toRegExp(n),a.test(i)&&t.splice(l,1))})}else o=n.indexOf("!"+r),o>=0&&n.splice(o,1)});var l=t.concat(n);return void 0===r||r===!0?e.sort(l):l}}]),e}();t["default"]=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];n(this,t);var i=r(this,Object.getPrototypeOf(t).call(this,e));return i.name=i.constructor.name,Object.defineProperty(i,"name",{enumerable:!1,writable:!1,value:"NotationError"}),Object.defineProperty(i,"message",{enumerable:!1,writable:!0,value:e}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(i,i.constructor):Object.defineProperty(i,"stack",{enumerable:!1,writable:!1,value:new Error(e).stack}),i}return i(t,e),t}(Error);t["default"]=a}])});
//# sourceMappingURL=notation.min.js.map